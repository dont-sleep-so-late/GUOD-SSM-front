"use strict";(self["webpackChunkssm"]=self["webpackChunkssm"]||[]).push([[494],{6494:function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{attrs:{inline:!0}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"器材名称",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("el-form-item",[t("el-button",{on:{click:e.getEquipmentList}},[e._v("搜索")])],1)],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:"",stripe:""}},[t("el-table-column",{attrs:{label:"器材名称",prop:"name"}}),t("el-table-column",{attrs:{prop:"classification",label:"器材类别"}}),t("el-table-column",{attrs:{prop:"surplus",label:"器材余量"}}),t("el-table-column",{attrs:{prop:"money",label:"器材金额(元/天)"}}),t("el-table-column",{attrs:{prop:"icon",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.editHandle(i.row.id)}}},[e._v("租用")])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],"current-page":e.current,"page-size":e.size,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"租用",visible:e.dialogVisible,width:"600px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{attrs:{model:e.editForm}},[t("el-form-item",{attrs:{label:"租用数量","label-width":"100px"}},[t("el-input-number",{attrs:{min:1,max:this.maxNum},model:{value:e.editForm.number,callback:function(t){e.$set(e.editForm,"number",t)},expression:"editForm.number"}})],1),t("el-form-item",{attrs:{label:"租用开始时间","label-width":"100px"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择租用开始时间","picker-options":e.pickerOptions},model:{value:e.editForm.starttime,callback:function(t){e.$set(e.editForm,"starttime",t)},expression:"editForm.starttime"}})],1),t("el-form-item",{attrs:{label:"租用结束时间","label-width":"100px"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择租用开始时间","picker-options":e.pickerOptions},model:{value:e.editForm.endtime,callback:function(t){e.$set(e.editForm,"endtime",t)},expression:"editForm.endtime"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.resetForm()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)],1)],1)},s=[],r={name:"equipment",data(){return{searchForm:{},delBtlStatus:!0,total:0,size:10,current:1,dialogVisible:!1,editForm:{number:1},pickerOptions:{disabledDate(e){return e.getTime()<Date.now()}},tableData:[],maxNum:1}},created(){this.getEquipmentList()},methods:{dateFormat(e){let t=new Date(e),i=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?"0"+t.getDate():t.getDate();return i+"-"+a+"-"+s},handleSizeChange(e){this.size=e,this.getEquipmentList()},handleCurrentChange(e){this.current=e,this.getEquipmentList()},resetForm(){this.editForm={},this.dialogVisible=!1,this.editForm.number=1},handleClose(){this.editForm={},this.editForm.number=1,this.dialogVisible=!1},getEquipmentList(){this.$axios.get("/equipment/list",{params:{competitionName:this.searchForm.name,current:this.current,size:this.size}}).then((e=>{this.tableData=e.data.data.pageData.records,this.size=e.data.data.pageData.size,this.current=e.data.data.pageData.current,this.total=e.data.data.pageData.total}))},submitForm(){this.editForm.starttime.getTime()>this.editForm.endtime.getTime()?this.$message({showClose:!0,message:"租用时间有误",type:"error"}):this.$axios.post("/borrow/save",this.editForm).then((e=>{this.$message({showClose:!0,message:"恭喜你，操作成功,等待器材管理员审核",type:"success",onClose:()=>{this.getEquipmentList()}}),this.editForm={},this.editForm.number=1,this.dialogVisible=!1}))},editHandle(e){this.dialogVisible=!0,this.maxNum=this.tableData[e-1].surplus,this.editForm.equipmentid=this.tableData[e-1].id,this.editForm.userid=sessionStorage.getItem("userId")}}},l=r,o=i(1656),n=(0,o.A)(l,a,s,!1,null,"5f19e32c",null),m=n.exports}}]);
//# sourceMappingURL=494.339d25b6.js.map