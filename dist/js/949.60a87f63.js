"use strict";(self["webpackChunkssm"]=self["webpackChunkssm"]||[]).push([[949],{4949:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{"text-align":"left",width:"1080px",margin:"0 auto"}},[e("el-image",{staticClass:"photo",attrs:{src:t.info.url}}),e("div",{staticClass:"hd"},[e("h3",{class:t.isShow?"tran":"blue",attrs:{id:"details"},on:{click:function(e){return t.changeToPeople()}}},[t._v("竞赛信息")]),e("h3",{class:t.isShow?"blue":"tran",attrs:{id:"people"},on:{click:function(e){return t.changeToInfo()}}},[t._v("报名列表")]),new Date<new Date(t.info.starttime)?e("div",{staticStyle:{float:"right"}},[new Date<new Date(t.info.starttime)&&1===t.info.applyStatus?e("el-button",{staticClass:"baoMing",on:{click:function(e){return t.apply()}}},[t._v("立即报名")]):t._e(),0===t.info.applyStatus?e("el-button",{staticClass:"baoMing",on:{click:function(e){return t.cancel()}}},[t._v("取消报名")]):t._e()],1):t._e(),e("div",{staticClass:"apply"},[new Date<new Date(t.info.starttime)?e("span",[t._v("报名时间 ")]):t._e(),new Date<new Date(t.info.starttime)?e("span",[t._v("距离报名截止还有 "+t._s(parseInt((new Date(t.info.starttime).getTime()-(new Date).getTime())/864e5))+" 天")]):e("span",[t._v("报名结束")]),e("p",[t._v(t._s(t.dateFormat(new Date)+" - "+t.dateFormat(t.info.starttime)))])])]),e("div",{staticClass:"content-left"},[t.isShow?t._e():e("div",{staticClass:"info"},[e("h1",{staticClass:"name"},[t._v(t._s(t.info.name))]),e("p",[t._v(" "+t._s(t.info.description)+" ")])]),t.isShow?e("div",{staticClass:"people"},[t._l(t.applyPeopleList,(function(s){return t.applyPeopleList.length>0?e("div",[e("span",[e("el-image",{staticClass:"avatar",attrs:{src:s.userAvatar}})],1),e("span",[t._v(" "+t._s("用户名: "+s.username)+" ")]),e("span",[t._v(" "+t._s("报名时间: "+t.dateFormat(s.created))+" ")])]):t._e()})),0==t.applyPeopleList.length?e("div",[t._v(" 暂时无人报名，赶快来报名吧！！！ ")]):t._e()],2):t._e()]),e("div",{staticClass:"content-right"},[e("p",[e("span",[t._v("竞赛地点")]),t._v(" "+t._s(t.info.place)+" ")]),e("p",[e("span",[t._v("竞赛创建人")]),t._v(" "+t._s(t.info.username)+" ")]),e("p",[e("span",[t._v("报名人数")]),t._v(" "+t._s(t.applyNum)+" ")])])],1)])},a=[],n={name:"competitionDetail",data(){return{competitionId:0,info:{},isShow:!1,applyForm:{},applyPeopleList:[],applyNum:0,userId:0}},created(){this.competitionId=sessionStorage.getItem("competitionId"),this.userId=sessionStorage.getItem("userId"),this.getCompetitionInfo(),this.getApplyPeopleList()},methods:{changeToPeople(){this.isShow=!1},changeToInfo(){this.isShow=!0},getApplyPeopleList(){this.$axios.get("/competition/getApplyPeopleList/"+this.competitionId).then((t=>{this.applyPeopleList=t.data.data.userApplyList,this.applyNum=this.applyPeopleList.length}))},apply(){this.applyForm.competitionid=this.competitionId,this.applyForm.userid=this.userId,this.$confirm("此操作将报名该比赛, 是否继续?","报名",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.post("/user/apply/save",this.applyForm).then((t=>{this.$message({type:"success",message:"报名成功!",onClose:()=>{this.getCompetitionInfo(),this.getApplyPeopleList()}})}))})).catch((()=>{this.$message({type:"info",message:"已取消报名"})}))},cancel(){this.$confirm("此操作将取消报名该比赛, 是否继续?","取消报名",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.post("/user/apply/cancel/"+this.competitionId+"/"+this.userId).then((t=>{this.$message({type:"success",message:"取消报名成功!",onClose:()=>{this.getCompetitionInfo(),this.getApplyPeopleList()}})}))}))},getCompetitionInfo(){this.$axios.get("/competition/getCompetitionInfo/"+this.competitionId+"/"+sessionStorage.getItem("userId")).then((t=>{this.info=t.data.data.competitionInfo}))},dateFormat(t){let e=new Date(t),s=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0"+e.getDate():e.getDate();return s+"年"+i+"月"+a+"日"}}},o=n,p=s(1656),l=(0,p.A)(o,i,a,!1,null,"c8a5fa06",null),c=l.exports}}]);
//# sourceMappingURL=949.60a87f63.js.map